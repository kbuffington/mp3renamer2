<div class="input-field" *ngIf="value">
	<input type="checkbox" clrCheckbox *ngIf="!readOnly" [(ngModel)]="value.overwrite">
	<label [ngStyle]="labelStyle">
		<ng-container *ngIf="different">
			<clr-icon shape="info-circle" size="20"
				[ngClass]="{ 'is-error': !value.changed }"
				(click)="showConflictValues()"></clr-icon>
		</ng-container>
		<clr-icon shape="check" size="20" *ngIf="!different"></clr-icon>
		{{ label }}
	</label>
	<div class="conflict-list" *ngIf="showValues">
		<div class="header-row">
			<span class="property">{{ displayLabel }}</span>
			<button class="btn btn-link btn-sm edit-btn" (click)="editValues = !editValues" *ngIf="!readOnly">
				{{ editValues ? 'Select' : 'Edit' }}
			</button>
			<button class="btn btn-link btn-sm close-btn" (click)="showValues = false">
				<clr-icon shape="window-close" size="16"></clr-icon>
			</button>
		</div>
		<ol class="property-list" *ngIf="!editValues">
			<li *ngFor="let val of value.values" class="conflict-item"
					[ngClass]="{'disabled': readOnly}"
					(click)="selectValue(val)">
				{{ val }}
			</li>
		</ol>
		<ol class="editable-list" *ngIf="editValues">
			<li *ngFor="let val of value.values; let i = index; trackBy: identify" class="edit-item">
				<input [(ngModel)]="value.values[i]">
			</li>
		</ol>
		<button class="btn btn-link" (click)="resetValues()">
			Reset Values
		</button>
	</div>
	<div class="data-field">
		<ng-container [ngSwitch]="inputType">
			<input *ngSwitchCase="inputTypes.Input"
				clrInput
				[value]="value.default"
				(focus)="$event.target.select()"
				[disabled]="readOnly"
				[ngClass]="{ 'dont-overwrite': !value.overwrite }"
				(input)="defaultValChanged($event.target.value)">
			<select *ngSwitchCase="inputTypes.Select"
					[ngModel]="value.default"
					[ngClass]="{ 'dont-overwrite': !value.overwrite }"
					(input)="defaultValChanged($event.target.value)">
				<option *ngFor="let option of selectOptions" [value]="option">
					{{ option }}
				</option>
			</select>
			<genre-select *ngSwitchCase="inputTypes.Genre"
				[genres]="value.default"
				(genreSelected)="defaultValChanged($event)">
			</genre-select>
			<!-- multi value switch case: https://stackoverflow.com/a/62407528/911192 -->
			<country-select *ngSwitchCase="[inputTypes.Country, inputTypes.CountryCode].includes(inputType) ? inputType : !inputType"
				[countries]="value.default"
				[multiSelect]="inputType === inputTypes.Country"
				[useCode]="inputType === inputTypes.CountryCode"
				(countrySelected)="defaultValChanged($event)">
			</country-select>
		</ng-container>
	</div>
</div>
